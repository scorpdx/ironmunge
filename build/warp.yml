parameters:
  runtime: ''
  project: ''
  outputPath: ''

steps:
- task: DotNetCoreInstaller@0
  displayName: 'Install .NET Core SDK 3.0.100-preview-010184'
  inputs:
    version: 3.0.100-preview-010184
- script: dotnet tool update -g dotnet-warp
  displayName: 'install or update dotnet-warp'
- script: dotnet-warp . -v -r ${{ parameters.runtime }}
  workingDirectory: 'src/${{ parameters.project }}'
  displayName: 'warp project'
- task: CopyFiles@2
  inputs:
    sourceFolder: 'src/${{ parameters.project }}'
    contents: |
     ${{ parameters.project }}
     ${{ parameters.project }}.exe
    targetFolder: '${{ parameters.outputPath }}'
  displayName: 'copy warp output'