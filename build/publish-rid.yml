parameters:
  runtime: ''
  outputPath: ''

steps:
- task: UseDotNet@2
  displayName: 'Use .NET Core sdk >=3.x'
  inputs:
    packageType: sdk
# workaround for 'UseDotNet@2 cant find sdk version matching 3.x #11569'
# https://github.com/microsoft/azure-pipelines-tasks/issues/11569
    version: 3.0.x
#   version: 3.x
- template: warp.yml
  parameters:
    runtime: ${{ parameters.runtime }}
    project: 'ironmunge'
    outputPath: ${{ parameters.outputPath }}
- template: warp.yml
  parameters:
    runtime: ${{ parameters.runtime }}
    project: 'SaveManager'
    outputPath: ${{ parameters.outputPath }}
- task: PublishBuildArtifacts@1
  inputs:
    pathtoPublish: ${{ parameters.outputPath }}
    ArtifactName: 'pub-${{ parameters.runtime }}'
