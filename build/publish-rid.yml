parameters:
  runtime: ''
  outputPath: ''

steps:
- task: DotNetCoreInstaller@0
  displayName: 'Install .NET Core SDK 2.2.100'
  inputs:
    version: 2.2.100
- script: dotnet tool install -g dotnet-warp
  displayName: 'install dotnet-warp'
  continueOnError: true
#when we're using sdk >3.0 this will also install
- script: dotnet tool update -g dotnet-warp
  displayName: 'install or update dotnet-warp'
- task: DotNetCoreInstaller@0
  displayName: 'Install .NET Core SDK 3.0.100-preview-010184'
  inputs:
    version: 3.0.100-preview-010184
- template: warp.yml
  parameters:
    runtime: ${{ parameters.runtime }}
    project: 'ironmunge'
    outputPath: ${{ parameters.outputPath }}
- template: warp.yml
  parameters:
    runtime: ${{ parameters.runtime }}
    project: 'SaveManager'
    outputPath: ${{ parameters.outputPath }}
- task: PublishBuildArtifacts@1
  inputs:
    pathtoPublish: ${{ parameters.outputPath }}
    ArtifactName: 'pub-${{ parameters.runtime }}'
